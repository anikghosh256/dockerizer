{
  "Dockerfile.njk": "# Creating multi-stage build for production\nFROM node:{{nodeVersion}}-alpine AS build\nRUN apk update && apk add --no-cache {{buildStagePackages}} > /dev/null 2>&1\nENV NODE_ENV=production\n\nWORKDIR /opt/\nCOPY package.json yarn.lock ./\nRUN yarn global add node-gyp\n\nRUN yarn config set network-timeout 600000 -g && yarn install --{{nodeEnv}}\nENV PATH /opt/node_modules/.bin:$PATH\nWORKDIR /opt/app\nCOPY . .\nRUN yarn build\n\n# Creating final production image\nFROM node:{{nodeVersion}}-alpine\nRUN apk add --no-cache {{productionStagePackages}}\nENV NODE_ENV=production\nWORKDIR /opt/\nCOPY --from=build /opt/node_modules ./node_modules\nWORKDIR /opt/app\nCOPY --from=build /opt/app ./\nENV PATH /opt/node_modules/.bin:$PATH\n\nRUN chown -R {{user}}:{{user}} /opt/app\nUSER {{user}}\nEXPOSE {{port}}\nCMD [\"yarn\", \"start\"]"
}